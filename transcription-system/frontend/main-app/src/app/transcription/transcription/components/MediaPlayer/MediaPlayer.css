        /* Import font for modern look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* ================================
           Stage 2: Basic Media Player Styles
           ================================ */
        
        /* ================================
           Extracted from transcription-page.css
           ================================ */
        .placeholder-container.media-player {
          flex: 0 0 auto; /* Don't grow or shrink */
          height: 150px; /* Fixed height */
          min-height: 150px;
          max-height: 150px;
          background: linear-gradient(135deg, rgba(23, 162, 184, 0.08) 0%, rgba(32, 201, 151, 0.12) 60%, rgba(40, 167, 69, 0.08) 100%);
          border-color: rgba(23, 162, 184, 0.3);
        }
        
        .placeholder-container.media-player:hover {
          border-color: #17a2b8;
          box-shadow: 0 8px 25px rgba(23, 162, 184, 0.2);
        }
        
        .placeholder-container.media-player h3 {
          color: #17a2b8;
        }
        
        /* Header locked state */
        .main-content.header-locked .placeholder-container.media-player {
          min-height: 120px; /* Fixed height instead of clamp */
          flex: 1.2;
        }
        
        /* Full screen responsive */
        @media (min-width: 1201px) {
          .main-content.header-locked .placeholder-container.media-player {
            min-height: clamp(90px, 10vh, 120px);
            flex: 1.1;
          }
        }
        
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Global Status Display */
        .media-global-status {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, rgba(32, 201, 151, 0.95) 0%, rgba(26, 93, 93, 0.95) 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10000;
            pointer-events: none;
        }
        
        .media-global-status.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* Media Player Container - RTL by default */
        .media-player-container {
            direction: rtl;
            width: 100%;
            max-width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, 
                rgba(15, 76, 76, 0.95) 0%,
                rgba(26, 93, 93, 0.90) 50%,
                rgba(15, 76, 76, 0.95) 100%);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(32, 201, 151, 0.15);
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
            position: relative;
            border: 1px solid rgba(32, 201, 151, 0.2);
            overflow-x: hidden;
            box-sizing: border-box;
            display: flex;
            flex-direction: row;
            gap: 15px;
            align-items: flex-start;
        }
        
        /* Media Player Content - wraps all controls */
        .media-player-content {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        /* Video Cube Container - side by side with controls */
        .video-cube-container {
            flex: 0 0 260px; /* Container width */
            height: 180px; /* Container height */
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid rgba(32, 201, 151, 0.2);
            margin-right: 10px;
            padding: 0;
        }
        
        /* Shrink controls when video is active */
        .media-player-container.video-active .control-btn {
            padding: 8px 10px;
            font-size: 14px;
        }
        
        .media-player-container.video-active .play-pause-btn {
            padding: 10px 18px;
        }
        
        .media-player-container.video-active .custom-slider {
            width: 70px; /* Even smaller sliders */
        }
        
        /* Audio element - hidden */
        #audioPlayer {
            display: none;
        }
        
        /* Controls Section */
        .controls-section {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(15, 76, 76, 0.6);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(32, 201, 151, 0.15);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        /* Toggle Wrapper - stays visible when collapsed */
        .section-wrapper {
            position: relative;
            width: 100%;
            box-sizing: border-box;
            padding: 0;
            margin: 0;
        }
        
        /* Ensure wrapper has minimum height when collapsed to show toggle */
        .section-wrapper.collapsed {
            min-height: 0; /* No minimum height needed */
            overflow: visible !important; /* Allow toggle to show outside */
        }
        
        /* Special handling for controls wrapper when collapsed */
        .section-wrapper.controls-wrapper.collapsed {
            min-height: 1px; /* Minimum height to keep toggle attached */
            background: transparent !important;
            border: none !important;
        }
        
        /* Hide the inner controls section but keep wrapper for toggle */
        .section-wrapper.controls-wrapper.collapsed .controls-section {
            display: none !important;
            height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            border: none !important;
        }
        
        /* Ensure controls don't shrink too much when video is shown */
        .media-player-container.video-active .media-player-content {
            min-width: 500px;
        }
        
        .media-player-container.video-active .control-buttons {
            flex-wrap: nowrap;
        }
        
        /* Collapse/Expand Toggle Button - Small triangle/tab */
        .collapse-toggle {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 12px;
            background: rgba(32, 201, 151, 0.15);
            border: 1px solid rgba(32, 201, 151, 0.3);
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            color: #20c997;
            font-size: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 100;
            opacity: 0.6;
            line-height: 1;
        }
        
        .collapse-toggle:hover {
            background: rgba(32, 201, 151, 0.25);
            opacity: 1;
        }
        
        .collapse-toggle .toggle-icon {
            display: inline-block;
            transition: transform 0.2s ease;
            font-size: 12px;
        }
        
        /* When collapsed, show toggle at bottom */
        .section-wrapper.collapsed .collapse-toggle {
            top: auto;
            bottom: -12px;
            border: 1px solid rgba(32, 201, 151, 0.3);
            border-top: none;
            border-radius: 0 0 8px 8px;
        }
        
        /* Fine-tune arrow positions for each section */
        .section-wrapper.controls-wrapper {
            display: block !important; /* Wrapper always visible */
        }
        
        .section-wrapper.controls-wrapper .collapse-toggle {
            top: -14px; /* Move up 2px for better alignment */
            display: flex !important; /* Force visibility */
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .section-wrapper.controls-wrapper.collapsed .collapse-toggle {
            bottom: -14px; /* Move up 2px when collapsed */
            display: flex !important; /* Force visibility */
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .section-wrapper.sliders-wrapper .collapse-toggle {
            top: -10px; /* Move down 2px for better alignment */
        }
        .section-wrapper.sliders-wrapper.collapsed .collapse-toggle {
            bottom: -10px; /* Move down 2px when collapsed */
        }
        
        /* Play/Pause Button */
        .play-pause-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                rgba(32, 201, 151, 0.9) 0%,
                rgba(23, 162, 184, 0.9) 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .play-pause-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(32, 201, 151, 0.4);
        }
        
        .play-pause-btn:active {
            transform: scale(0.98);
        }
        
        /* Loading display */
        .loading-display {
            color: rgba(224, 247, 247, 0.9);
            font-size: 14px;
            padding: 10px;
            text-align: center;
            opacity: 0.8;
        }
        
        /* Test info display */
        .test-info {
            color: rgba(224, 247, 247, 0.9);
            font-size: 12px;
            padding: 10px;
            background: rgba(15, 76, 76, 0.4);
            border-radius: 6px;
            margin-top: 10px;
            direction: ltr; /* LTR for English test messages */
            border: 1px solid rgba(32, 201, 151, 0.15);
        }
        
        .test-info div {
            padding: 2px 0;
        }
        
        /* Status indicator */
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin: 0 5px;
            background: #dc3545;
        }
        
        .status-indicator.ready {
            background: #28a745;
        }
        
        .status-indicator.playing {
            background: #28a745;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ================================
           Stage 3: Progress Bar Styles
           ================================ */
        
        /* Progress Bar Container - renamed to avoid conflict with header */
        .media-progress-container {
            width: 100%;
            padding: 15px;
            background: rgba(32, 30, 32, 0.5);
            border-radius: 8px;
            margin-top: 10px;
        }
        
        /* Progress Row - timestamps and bar inline */
        .progress-row {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
        }
        
        /* Progress Bar Wrapper */
        /* Progress bar and time display styles moved to controls.css */
        
        /* Control buttons styles moved to controls.css */
        
        /* Slider styles moved to controls.css */
        
        /* ================================
           Stage 7: Settings Modal Styles
           ================================ */
        
        /* Settings Button */
        .settings-btn {
            position: absolute;
            top: 15px;
            left: 15px; /* Left in RTL layout */
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(26, 93, 93, 0.3);
            border: 1px solid rgba(32, 201, 151, 0.3);
            color: rgba(255, 255, 255, 0.8);
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .settings-btn:hover {
            background: rgba(32, 201, 151, 0.2);
            transform: rotate(90deg);
        }
        
        /* Modal Overlay */
        .media-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 76, 76, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }
        
        .media-modal-overlay.active {
            display: flex;
        }
        
        /* Modal Container */
        .settings-modal {
            background: linear-gradient(135deg, 
                #0f4c4c 0%,
                #1a5d5d 50%,
                #0f4c4c 100%);
            border-radius: 12px;
            width: 900px;
            max-width: 95%;
            height: 98vh;
            max-height: 900px;
            min-height: 720px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(15, 76, 76, 0.5);
            display: flex;
            flex-direction: column;
            direction: rtl;
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
            border: 1px solid rgba(32, 201, 151, 0.3);
        }
        
        /* Modal Header */
        .settings-modal-header {
            padding: 20px 25px;
            background: rgba(32, 201, 151, 0.1);
            border-bottom: 2px solid rgba(32, 201, 151, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .settings-modal-title {
            color: #20c997;
            font-size: 20px;
            font-weight: 600;
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
            letter-spacing: 0.5px;
        }
        
        .settings-modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(32, 201, 151, 0.1);
            border: 1px solid rgba(32, 201, 151, 0.3);
            color: #20c997;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .settings-modal-close:hover {
            background: rgba(32, 201, 151, 0.2);
            transform: rotate(90deg);
            border-color: #20c997;
        }
        
        /* Modal Tabs */
        .settings-modal-tabs {
            display: flex;
            padding: 0;
            background: rgba(15, 76, 76, 0.4);
            border-bottom: 1px solid rgba(32, 201, 151, 0.2);
        }
        
        .settings-tab-btn {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            color: rgba(224, 247, 247, 0.7);
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .settings-tab-btn:hover {
            color: rgba(224, 247, 247, 0.9);
            background: rgba(32, 201, 151, 0.05);
        }
        
        .settings-tab-btn.active {
            color: #20c997;
            background: rgba(32, 201, 151, 0.1);
        }
        
        .settings-tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 10%;
            right: 10%;
            height: 3px;
            background: #20c997;
            border-radius: 3px 3px 0 0;
        }
        
        /* Modal Content */
        .settings-modal-content {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            background: rgba(15, 76, 76, 0.5);
            min-height: 0;
            display: flex;
            flex-direction: column;
        }
        
        /* Simple scrollbar matching inner scrollbars */
        .settings-modal-content::-webkit-scrollbar,
        .settings-tab-content::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .settings-modal-content::-webkit-scrollbar-track,
        .settings-tab-content::-webkit-scrollbar-track {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 4px;
        }
        
        .settings-modal-content::-webkit-scrollbar-thumb,
        .settings-tab-content::-webkit-scrollbar-thumb {
            background: rgba(32, 201, 151, 0.3);
            border-radius: 4px;
        }
        
        .settings-modal-content::-webkit-scrollbar-thumb:hover,
        .settings-tab-content::-webkit-scrollbar-thumb:hover {
            background: rgba(32, 201, 151, 0.5);
        }
        
        .settings-modal-content::-webkit-scrollbar-corner,
        .settings-tab-content::-webkit-scrollbar-corner {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 4px;
        }
        
        .settings-tab-content {
            display: none;
            color: rgba(224, 247, 247, 0.9);
            background: transparent;
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }
        
        .settings-tab-content.active {
            display: block;
        }
        
        /* Responsive adjustments for smaller screens */
        @media (max-height: 850px) {
            .settings-modal {
                height: 95vh;
                max-height: 95vh;
                min-height: auto;
            }
        }
        
        @media (max-height: 700px) {
            .settings-modal {
                height: 90vh;
                max-height: 90vh;
                min-height: auto;
            }
            
            .settings-modal-content {
                padding: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .settings-modal {
                width: 100%;
                max-width: 100%;
                height: 95vh;
                max-height: 95vh;
                border-radius: 8px;
            }
        }
        
        @media (max-width: 500px) {
            .settings-modal {
                width: 100%;
                max-width: 100%;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
            }
        }
        
        /* Tab content placeholder styles */
        .settings-tab-placeholder {
            text-align: center;
            padding: 50px;
            color: rgba(224, 247, 247, 0.7);
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
            font-size: 14px;
            background: rgba(32, 201, 151, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(32, 201, 151, 0.1);
        }
        
        .settings-tab-placeholder p:first-child {
            font-size: 32px;
            margin-bottom: 15px;
            filter: saturate(0.8);
        }
        
        /* ================================
           Stage 8: Keyboard Shortcuts Styles
           ================================ */
        
        .shortcuts-config {
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
        }
        
        .media-shortcuts-header {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .shortcuts-header h3 {
            color: #20c997;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .shortcuts-hint {
            color: rgba(224, 247, 247, 0.7);
            font-size: 13px;
        }
        
        .media-shortcuts-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(15, 76, 76, 0.4);
            border-radius: 8px;
        }
        
        /* Shortcut Groups */
        .media-shortcut-group {
            background: rgba(32, 201, 151, 0.05);
            border-radius: 8px;
            padding: 12px;
            border: 1px solid rgba(32, 201, 151, 0.15);
        }
        
        .group-header {
            font-size: 14px;
            font-weight: 600;
            color: #20c997;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(32, 201, 151, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .media-shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: rgba(32, 201, 151, 0.08);
            border-radius: 6px;
            border: 1px solid rgba(32, 201, 151, 0.2);
            transition: all 0.2s ease;
        }
        
        .media-shortcut-item:hover {
            background: rgba(32, 201, 151, 0.12);
            border-color: rgba(32, 201, 151, 0.3);
        }
        
        .media-shortcut-label {
            color: rgba(224, 247, 247, 0.9);
            font-size: 14px;
            flex: 1;
        }
        
        .media-shortcut-key {
            padding: 8px 12px;
            background: linear-gradient(135deg, #1a5d5d 0%, #0f4c4c 100%);
            color: #20c997;
            border: 1px solid rgba(32, 201, 151, 0.3);
            border-radius: 4px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
            max-width: 180px;
            text-align: center;
            font-family: 'Segoe UI', Arial, sans-serif;
            white-space: nowrap;
            overflow: visible;
            line-height: 1.2;
            height: auto;
            min-height: 32px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            word-break: keep-all;
        }
        
        .media-shortcut-key:hover {
            background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
            color: #0a2e2e;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(32, 201, 151, 0.3);
        }
        
        .media-shortcut-key.capturing {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            animation: pulse 1s infinite;
        }
        
        .shortcuts-footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(32, 201, 151, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .reset-shortcuts-btn {
            padding: 8px 20px;
            background: linear-gradient(135deg, #20c997 0%, #17a8a8 100%);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
        }
        
        .reset-shortcuts-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(32, 201, 151, 0.4);
        }
        
        /* Toggle Switch for shortcuts enabled */
        .media-shortcuts-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(108, 92, 231, 0.3);
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background: #20c997;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        .toggle-label {
            color: rgba(224, 247, 247, 0.9);
            font-size: 14px;
            font-weight: 500;
        }
        
        /* Global status notification */
        .media-global-status {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #0f4c4c 0%, #1a5d5d 100%);
            color: #20c997;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(32, 201, 151, 0.3);
            border: 1px solid rgba(32, 201, 151, 0.5);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            pointer-events: none;
            z-index: 10000;
            text-align: center;
        }
        
        .media-global-status.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        .media-shortcuts-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, rgba(32, 201, 151, 0.95) 0%, rgba(26, 93, 93, 0.95) 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 10000;
            pointer-events: none;
            max-width: 300px;
            font-family: 'Segoe UI', Tahoma, -apple-system, sans-serif;
        }
        
        .media-shortcuts-status.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Scrollbar for shortcuts list */
        .media-shortcuts-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .media-shortcuts-list::-webkit-scrollbar-track {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 4px;
        }
        
        .media-shortcuts-list::-webkit-scrollbar-thumb {
            background: rgba(32, 201, 151, 0.3);
            border-radius: 4px;
        }
        
        .media-shortcuts-list::-webkit-scrollbar-thumb:hover {
            background: rgba(32, 201, 151, 0.5);
        }
        
        /* Already defined above - removing duplicate */
        
        /* ================================
           Stage 9: Pedal Settings Styles
           ================================ */
        
        .pedal-settings-container {
            padding: 20px;
        }
        
        /* Pedal header matching shortcuts header */
        .media-pedal-header {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .media-pedal-header h3 {
            color: inherit;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .pedal-hint {
            color: rgba(224, 247, 247, 0.7);
            font-size: 13px;
        }
        
        .media-pedal-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .pedal-connection-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .pedal-connection-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .pedal-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        #pedal-status-icon {
            font-size: 20px;
        }
        
        .pedal-status-icon.connected {
            color: #20c997;
        }
        
        .pedal-status-icon.disconnected {
            color: #ff6b6b;
        }
        
        .pedal-connect-button {
            background: linear-gradient(135deg, #20c997 0%, #1a5d5d 100%);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .pedal-connect-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(32, 201, 151, 0.3);
        }
        
        .pedal-connect-button.disconnect {
            background: linear-gradient(135deg, #ff6b6b 0%, #d63031 100%);
        }
        
        .pedal-help-text {
            color: rgba(224, 247, 247, 0.7);
            font-size: 13px;
            margin-top: 10px;
        }
        
        .pedal-mappings-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .pedal-mappings-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        /* Visual pedal interface */
        .pedal-visual-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        .pedal-visual {
            display: flex;
            gap: 30px;
            background: linear-gradient(135deg, rgba(15, 76, 76, 0.6) 0%, rgba(26, 93, 93, 0.4) 100%);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .pedal-button-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .pedal-button-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(26, 93, 93, 0.8) 0%, rgba(15, 76, 76, 0.9) 100%);
            border: 3px solid rgba(32, 201, 151, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        
        .pedal-button-circle:hover {
            transform: translateY(-3px);
            border-color: #20c997;
            box-shadow: 0 6px 20px rgba(32, 201, 151, 0.4);
        }
        
        .pedal-button-circle.active {
            background: linear-gradient(135deg, #20c997 0%, #1a5d5d 100%);
            transform: scale(0.95);
        }
        
        /* Rewind on Pause Settings */
        .rewind-on-pause-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            margin-top: 20px;
            border: 1px solid rgba(32, 201, 151, 0.3);
        }
        
        .rewind-on-pause-section h4 {
            color: #20c997;
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 600;
        }
        
        .rewind-on-pause-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }
        
        .rewind-on-pause-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .rewind-amount-container {
            display: flex;
            align-items: center;
            gap: 8px;
            transition: opacity 0.3s ease;
        }
        
        .rewind-amount-container.disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        
        .rewind-amount-input {
            width: 80px;
            padding: 6px 10px;
            background: rgba(15, 76, 76, 0.6);
            border: 1px solid rgba(32, 201, 151, 0.5);
            border-radius: 6px;
            color: #e0f7f7;
            font-size: 14px;
        }
        
        .rewind-amount-input:focus {
            outline: none;
            border-color: #20c997;
            box-shadow: 0 0 0 2px rgba(32, 201, 151, 0.2);
        }
        
        /* Auto-detect Tab Styles */
        .auto-detect-container {
            padding: 10px;
            margin-top: 20px;  /* Add spacing from the top */
        }
        
        .media-auto-detect-header {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .media-auto-detect-header h3 {
            color: inherit;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .auto-detect-hint {
            color: rgba(224, 247, 247, 0.7);
            font-size: 13px;
        }
        
        .media-auto-detect-toggle {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 10px;
            margin-top: 10px;
        }
        
        .auto-detect-mode-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .auto-detect-mode-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .auto-detect-mode-options {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .mode-option {
            flex: 1;
            cursor: pointer;
            max-width: 200px;
        }
        
        .mode-option input[type="radio"] {
            display: none;
        }
        
        .mode-card {
            background: rgba(15, 76, 76, 0.6);
            border: 2px solid rgba(32, 201, 151, 0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-height: 120px;
        }
        
        .mode-option input[type="radio"]:checked + .mode-card {
            background: rgba(32, 201, 151, 0.2);
            border-color: #20c997;
            box-shadow: 0 0 10px rgba(32, 201, 151, 0.3);
        }
        
        .mode-icon {
            font-size: 24px;
        }
        
        .mode-title {
            font-weight: 600;
            color: #e0f7f7;
            font-size: 16px;
        }
        
        .mode-description {
            color: rgba(224, 247, 247, 0.8);
            font-size: 13px;
            line-height: 1.3;
        }
        
        .mode-card:hover {
            background: rgba(32, 201, 151, 0.15);
            border-color: rgba(32, 201, 151, 0.5);
        }
        
        .auto-detect-settings-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .auto-detect-settings-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .auto-detect-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .setting-item label {
            color: #e0f7f7;
            font-weight: 500;
            font-size: 14px;
            flex: 1;
        }
        
        .auto-detect-input {
            background: rgba(15, 76, 76, 0.6);
            border: 1px solid rgba(32, 201, 151, 0.3);
            border-radius: 6px;
            padding: 8px 12px;
            color: #e0f7f7;
            font-size: 14px;
            width: 120px;
        }
        
        .auto-detect-input:focus {
            outline: none;
            border-color: #20c997;
            box-shadow: 0 0 0 2px rgba(32, 201, 151, 0.2);
        }
        
        .auto-detect-status-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
        }
        
        .auto-detect-status-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .auto-detect-status {
            display: flex;
            justify-content: center;
            gap: 30px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(15, 76, 76, 0.6);
            border-radius: 8px;
            min-width: 120px;
            justify-content: center;
        }
        
        .status-text {
            font-size: 14px;
            font-weight: 500;
            color: #e0f7f7;
        }
        
        .status-icon {
            color: #666;
            font-size: 20px;
        }
        
        .media-auto-detect-header {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .media-auto-detect-header h3 {
            color: inherit;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .auto-detect-hint {
            color: rgba(224, 247, 247, 0.7);
            font-size: 13px;
        }
        
        .media-auto-detect-toggle {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 10px;
            margin-top: 10px;
        }
        
        .auto-detect-mode-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .auto-detect-mode-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .auto-detect-mode-options {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .mode-option {
            flex: 1;
            cursor: pointer;
        }
        
        .mode-option input[type="radio"] {
            display: none;
        }
        
        .mode-card {
            background: rgba(15, 76, 76, 0.6);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .mode-option input[type="radio"]:checked + .mode-card {
            background: rgba(32, 201, 151, 0.1);
            border-color: #20c997;
        }
        
        .mode-card:hover {
            background: rgba(32, 201, 151, 0.05);
            transform: translateY(-2px);
        }
        
        .mode-icon {
            font-size: 32px;
        }
        
        .mode-title {
            color: #20c997;
            font-size: 16px;
            font-weight: 600;
        }
        
        .mode-description {
            color: rgba(224, 247, 247, 0.7);
            font-size: 12px;
        }
        
        .auto-detect-settings-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .auto-detect-settings-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .auto-detect-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }
        
        .auto-detect-input {
            width: 120px;
            padding: 6px 10px;
            background: rgba(15, 76, 76, 0.6);
            border: 1px solid rgba(32, 201, 151, 0.5);
            border-radius: 6px;
            color: #e0f7f7;
            font-size: 14px;
        }
        
        .auto-detect-input:focus {
            outline: none;
            border-color: #20c997;
            box-shadow: 0 0 0 2px rgba(32, 201, 151, 0.2);
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .auto-detect-status-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .auto-detect-status-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .auto-detect-status {
            display: flex;
            justify-content: center;
            gap: 30px;
        }
        
        .status-indicator, .typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(15, 76, 76, 0.6);
            border-radius: 20px;
        }
        
        .status-indicator.active .status-icon {
            color: #20c997;
        }
        
        .status-icon {
            color: #666;
            font-size: 20px;
        }
        
        .typing-icon {
            animation: typing 1.5s infinite;
        }
        
        @keyframes typing {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        .pedal-button-arrow {
            font-size: 32px;
        }
        
        .pedal-button-label {
            color: #e0f7f7;
            font-size: 14px;
            font-weight: 500;
        }
        
        .pedal-action-select {
            background: rgba(15, 76, 76, 0.6);
            border: 1px solid rgba(32, 201, 151, 0.3);
            color: #e0f7f7;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            min-width: 150px;
        }
        
        .pedal-action-select:focus {
            outline: none;
            border-color: #20c997;
            box-shadow: 0 0 0 2px rgba(32, 201, 151, 0.2);
        }
        
        .pedal-continuous-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .pedal-continuous-section h3 {
            color: #20c997;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .pedal-checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #e0f7f7;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .pedal-checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .pedal-continuous-config {
            padding: 15px;
            background: rgba(26, 93, 93, 0.3);
            border-radius: 8px;
        }
        
        .pedal-continuous-config label {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #e0f7f7;
        }
        
        .pedal-continuous-config input[type="number"] {
            background: rgba(15, 76, 76, 0.6);
            border: 1px solid rgba(32, 201, 151, 0.3);
            color: #e0f7f7;
            padding: 6px 10px;
            border-radius: 4px;
            width: 80px;
        }
        
        .pedal-test-section {
            background: rgba(15, 76, 76, 0.4);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .pedal-test-section h3 {
            color: #20c997;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .pedal-test-hint {
            color: rgba(224, 247, 247, 0.7);
            font-size: 13px;
            margin-bottom: 15px;
        }
        
        .pedal-test-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            background: rgba(26, 93, 93, 0.3);
            border-radius: 8px;
        }
        
        .pedal-test-button {
            font-size: 36px;
            opacity: 0.3;
            transition: all 0.2s ease;
        }
        
        .pedal-test-button.active {
            opacity: 1;
            color: #20c997;
            transform: scale(1.2);
        }
        
        /* ================================
           Responsive Design
           ================================ */
        
        /* Mobile screens - stack vertically */
        @media (max-width: 768px) {
            .progress-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .progress-bar-wrapper {
                width: 100%;
                order: 1; /* Bar first */
            }
            
            /* Time displays side by side below bar */
            .time-row {
                display: flex;
                justify-content: space-between;
                width: 100%;
                order: 2;
            }
            
            .media-player-container {
                padding: 10px;
            }
            
            .media-progress-container {
                padding: 10px;
            }
        }
        
        /* Add transition to base container */
        .media-player-container {
            transition: width 0.3s ease, margin 0.3s ease !important;
        }
        
        /* ================================
           Status Messages
           ================================ */
        
        .media-status-message {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            margin: 10px 0;
            border-radius: 8px;
            background: rgba(32, 30, 32, 0.9);
            border: 1px solid;
            animation: slideIn 0.3s ease;
            position: relative;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .media-status-success {
            border-color: rgba(32, 201, 151, 0.5);
            background: linear-gradient(135deg, 
                rgba(32, 201, 151, 0.1) 0%, 
                rgba(32, 30, 32, 0.9) 100%);
        }
        
        .media-status-warning {
            border-color: rgba(255, 193, 7, 0.5);
            background: linear-gradient(135deg, 
                rgba(255, 193, 7, 0.1) 0%, 
                rgba(32, 30, 32, 0.9) 100%);
        }
        
        .media-status-error {
            border-color: rgba(220, 53, 69, 0.5);
            background: linear-gradient(135deg, 
                rgba(220, 53, 69, 0.1) 0%, 
                rgba(32, 30, 32, 0.9) 100%);
        }
        
        .media-status-info {
            border-color: rgba(23, 162, 184, 0.5);
            background: linear-gradient(135deg, 
                rgba(23, 162, 184, 0.1) 0%, 
                rgba(32, 30, 32, 0.9) 100%);
        }
        
        .media-status-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 14px;
            font-weight: bold;
        }
        
        .media-status-success .media-status-icon {
            background: rgba(32, 201, 151, 0.2);
            color: #20c997;
        }
        
        .media-status-warning .media-status-icon {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .media-status-error .media-status-icon {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .media-status-info .media-status-icon {
            background: rgba(23, 162, 184, 0.2);
            color: #17a2b8;
        }
        
        .media-status-content {
            flex: 1;
        }
        
        .media-status-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
            color: rgba(255, 255, 255, 0.95);
        }
        
        .media-status-text {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.4;
        }
        
        .media-status-close {
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            padding: 4px;
            font-size: 16px;
            line-height: 1;
            transition: color 0.2s ease;
        }
        
        .media-status-close:hover {
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* Media player container adjustment when video is active - REMOVED 
           Video cube is now inside the container, not floating */
        
        /* Video Cube Styles */
        .video-cube {
            background: linear-gradient(135deg, #1a5d5d 0%, #0f4c4c 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }
        
        /* Video cube in layout mode */
        .video-cube.in-layout {
            position: relative;
            width: 240px; /* Wider for better proportion */
            height: 160px; /* Slightly taller */
            border: 2px solid #20c997;
            margin: 10px auto 0; /* Center horizontally, push down a bit */
        }
        
        /* Video cube detached mode */
        .video-cube.detached {
            position: fixed;
            width: 320px;
            height: 240px;
            z-index: 500;
            overflow: hidden;
            transition: height 0.3s ease; /* Smooth height changes */
            /* Position set dynamically by JavaScript */
        }
        
        .video-cube.active {
            /* Active state - cube is visible */
            opacity: 1;
        }
        
        .video-cube-header {
            background: linear-gradient(135deg, #0f4c4c 0%, #1a5d5d 100%);
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
            height: 32px;
        }
        
        .video-cube-title {
            color: #20c997;
            font-size: 12px;
            font-weight: 600;
            margin: 0;
        }
        
        .video-cube-controls {
            display: flex;
            gap: 4px;
        }
        
        .video-control-btn {
            background: transparent;
            border: 1px solid #20c997;
            color: #20c997;
            width: 20px;
            height: 20px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .video-control-btn:hover {
            background: rgba(32, 201, 151, 0.2);
            transform: scale(1.1);
        }
        
        .video-cube-content {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #000;
        }
        
        .video-cube video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .video-cube-resize-handle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: transparent;
            border: 2px solid #20c997;
            border-top: none;
            border-left: none;
            cursor: nwse-resize;
            bottom: 0;
            right: 0;
            opacity: 0.5;
            transition: opacity 0.2s;
            z-index: 10;
            pointer-events: auto;
        }
        
        .video-cube-resize-handle:hover {
            opacity: 1;
        }
        
        .video-cube.minimized {
            display: none;
        }
        
        .video-restore-control {
            position: absolute;
            top: 15px;
            left: 60px; /* Position next to settings button (left + width + gap) */
            background: linear-gradient(135deg, #0f4c4c 0%, #1a5d5d 100%);
            border: 1px solid #20c997;
            color: #20c997;
            padding: 6px 12px;
            border-radius: 18px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            z-index: 1000;
            height: 36px;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .video-restore-control.visible {
            display: flex;
        }
        
        .video-restore-control:hover {
            background: linear-gradient(135deg, #20c997 0%, #1a5d5d 100%);
            transform: scale(1.05);
        }

        /* ================================
           Stage 5: Waveform Styles
           ================================ */

        /* Waveform loading bar */
        .waveform-loading-bar {
            width: 100%;
            height: 8px;
            background: rgba(26, 93, 93, 0.3);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .waveform-progress-fill {
            height: 100%;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        /* Waveform container wrapper */
        .waveform-progress-wrapper {
            display: flex;
            align-items: center;
            min-height: 60px;
        }

        /* Waveform container styling - match the theme */
        .waveform-container {
            background: rgba(15, 76, 76, 0.1) !important;
            border: 1px solid rgba(32, 201, 151, 0.15) !important;
            border-radius: 4px !important;
        }

        /* Waveform toggle button in progress bar area - tiny dot */
        .waveform-toggle-btn {
            background: transparent;
            border: none;
            color: rgba(32, 201, 151, 0.6);
            padding: 0;
            margin-left: auto; /* Push to far right edge */
            margin-right: 5px; /* Small gap from edge */
            cursor: pointer;
            font-size: 8px;
            transition: all 0.2s ease;
            width: 12px;
            height: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.6;
            border-radius: 50%;
        }

        .waveform-toggle-btn.active {
            color: white;
            opacity: 1;
        }

        .waveform-toggle-btn:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .waveform-toggle-btn:active {
            transform: scale(0.8);
        }
