<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Player - ES6 Module Version</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Global Status Display -->
    <div class="media-global-status" id="mediaGlobalStatus"></div>
    
    <!-- Media Player Component -->
    <div class="media-player-container" id="mediaPlayerContainer">
        <!-- Hidden Audio Element -->
        <audio id="audioPlayer" preload="auto"></audio>
        
        <!-- Loading Display -->
        <div class="loading-display" id="loadingDisplay">
            טוען נגן מדיה...
        </div>
        
        <!-- Controls Section Wrapper -->
        <div class="section-wrapper" id="controlsWrapper">
            <!-- Collapse/Expand Toggle -->
            <button class="collapse-toggle" id="controlsToggle" title="הסתר/הצג פקדי הפעלה">
                <span class="toggle-icon">▼</span>
            </button>
            
            <!-- Controls Section -->
            <div class="controls-section" id="controlsSection" style="display: none;">
                <!-- Control Buttons (RTL: rewind on left, forward on right) -->
                <div class="control-buttons">
                <!-- Rewind buttons (left side in RTL) -->
                <button class="control-btn" id="rewind5Btn" title="אחורה 5 שניות">
                    ➡️
                    <span class="skip-amount">5</span>
                </button>
                
                <button class="control-btn" id="rewind2_5Btn" title="אחורה 2.5 שניות">
                    ➡️
                    <span class="skip-amount">2.5</span>
                </button>
                
                <!-- Play/Pause Button (center) -->
                <button class="play-pause-btn" id="playPauseBtn" title="הפעל/השהה">
                    <span id="playIcon">▶️</span>
                </button>
                
                <!-- Forward buttons (right side in RTL) -->
                <button class="control-btn" id="forward2_5Btn" title="קדימה 2.5 שניות">
                    ⬅️
                    <span class="skip-amount">2.5</span>
                </button>
                
                <button class="control-btn" id="forward5Btn" title="קדימה 5 שניות">
                    ⬅️
                    <span class="skip-amount">5</span>
                </button>
            </div>
            </div>
        </div>
        
        <!-- Progress Bar Section (Stage 3) -->
        <div class="media-progress-container" id="progressContainer" style="display: none;">
            <!-- Progress Row: timestamps inline with bar -->
            <div class="progress-row">
                <!-- Current Time (left side in RTL) -->
                <span class="time-display" id="currentTime" title="לחץ לקפיצה להתחלה, קליק ימני לעריכה">00:00:00</span>
                
                <!-- Progress Bar (middle) -->
                <div class="progress-bar-wrapper" id="progressBar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                </div>
                
                <!-- Duration (right side in RTL) -->
                <span class="time-display" id="totalTime" title="לחץ לקפיצה לסוף, קליק ימני לעריכה">00:00:00</span>
            </div>
            
            <!-- Mobile view: time displays below bar -->
            <div class="time-row" style="display: none;">
                <span class="time-display" id="totalTimeMobile" title="לחץ לקפיצה לסוף, קליק ימני לעריכה">00:00:00</span>
                <span class="time-display" id="currentTimeMobile" title="לחץ לקפיצה להתחלה, קליק ימני לעריכה">00:00:00</span>
            </div>
        </div>
        
        <!-- Sliders Section Wrapper -->
        <div class="section-wrapper" id="slidersWrapper">
            <!-- Collapse/Expand Toggle -->
            <button class="collapse-toggle" id="slidersToggle" title="הסתר/הצג בקרות עוצמה ומהירות">
                <span class="toggle-icon">▼</span>
            </button>
            
            <!-- Sliders Section (Stage 6) -->
            <div class="sliders-container" id="slidersContainer" style="display: none;">
                <!-- Volume Slider -->
                <div class="slider-group">
                <span class="slider-icon" id="volumeIcon" title="השתק/בטל השתקה">🔊</span>
                <input type="range" class="custom-slider" id="volumeSlider" 
                       min="0" max="100" value="100" title="עוצמת קול">
                <span class="slider-value" id="volumeValue">100%</span>
            </div>
            
            <!-- Speed Slider -->
            <div class="slider-group">
                <span class="slider-icon" id="speedIcon" title="לחץ להחלפת מהירות, לחץ פעמיים לאיפוס">⚡</span>
                <input type="range" class="custom-slider" id="speedSlider" 
                       min="50" max="200" value="100" step="5" title="מהירות הפעלה">
                <span class="slider-value" id="speedValue">1.0x</span>
            </div>
            </div>
        </div>
        
        <!-- Video Restore Button (shows when video is minimized) -->
        <button class="video-restore-control" id="videoRestoreBtn" style="display: none;">
            🎬 שחזר
        </button>
        
        <!-- Settings Button (Stage 7) -->
        <button class="settings-btn" id="settingsBtn" title="הגדרות">
            ⚙️
        </button>
    </div>
    
    <!-- Settings Modal (Stage 7) -->
    <div class="media-modal-overlay" id="modalOverlay">
        <div class="settings-modal">
            <!-- Modal Header -->
            <div class="settings-modal-header">
                <h2 class="settings-modal-title">הגדרות נגן מדיה</h2>
                <button class="settings-modal-close" id="modalClose">✕</button>
            </div>
            
            <!-- Modal Tabs -->
            <div class="settings-modal-tabs">
                <button class="settings-tab-btn active" data-tab="shortcuts">קיצורי מקלדת</button>
                <button class="settings-tab-btn" data-tab="pedal">דוושת רגל</button>
                <button class="settings-tab-btn" data-tab="autodetect">זיהוי אוטומטי</button>
            </div>
            
            <!-- Modal Content -->
            <div class="settings-modal-content">
                <!-- Shortcuts Tab -->
                <div class="settings-tab-content active" id="shortcuts-tab">
                    <div class="shortcuts-config">
                        <div class="media-shortcuts-header">
                            <h3>⌨️ קיצורי מקלדת</h3>
                            <p class="shortcuts-hint">לחץ על קיצור כדי לשנות אותו</p>
                            <div class="media-shortcuts-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="shortcutsEnabledToggle" checked onchange="toggleShortcutsEnabled(true)">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">קיצורים פעילים</span>
                            </div>
                        </div>
                        
                        <div class="media-shortcuts-list">
                            <!-- Group 1: Playback Control -->
                            <div class="media-shortcut-group">
                                <div class="group-header">🎵 בקרת הפעלה</div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הפעל/השהה</span>
                                    <button class="media-shortcut-key" data-action="playPause" id="shortcut-playPause">רווח</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">עצור</span>
                                    <button class="media-shortcut-key" data-action="stop" id="shortcut-stop">Esc</button>
                                </div>
                            </div>
                            
                            <!-- Group 2: Navigation -->
                            <div class="media-shortcut-group">
                                <div class="group-header">⏩ ניווט</div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">קפוץ אחורה 5 שניות</span>
                                    <button class="media-shortcut-key" data-action="rewind5" id="shortcut-rewind5">→</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">קפוץ קדימה 5 שניות</span>
                                    <button class="media-shortcut-key" data-action="forward5" id="shortcut-forward5">←</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">קפוץ אחורה 2.5 שניות</span>
                                    <button class="media-shortcut-key" data-action="rewind2_5" id="shortcut-rewind2_5">Shift+→</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">קפוץ קדימה 2.5 שניות</span>
                                    <button class="media-shortcut-key" data-action="forward2_5" id="shortcut-forward2_5">Shift+←</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">קפוץ להתחלה</span>
                                    <button class="media-shortcut-key" data-action="jumpToStart" id="shortcut-jumpToStart">Home</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">קפוץ לסוף</span>
                                    <button class="media-shortcut-key" data-action="jumpToEnd" id="shortcut-jumpToEnd">End</button>
                                </div>
                            </div>
                            
                            <!-- Group 3: Volume & Speed -->
                            <div class="media-shortcut-group">
                                <div class="group-header">🔊 עוצמה ומהירות</div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הגבר עוצמה</span>
                                    <button class="media-shortcut-key" data-action="volumeUp" id="shortcut-volumeUp">↑</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הנמך עוצמה</span>
                                    <button class="media-shortcut-key" data-action="volumeDown" id="shortcut-volumeDown">↓</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">השתק/בטל השתקה</span>
                                    <button class="media-shortcut-key" data-action="mute" id="shortcut-mute">M</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הגבר מהירות</span>
                                    <button class="media-shortcut-key" data-action="speedUp" id="shortcut-speedUp">=</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הנמך מהירות</span>
                                    <button class="media-shortcut-key" data-action="speedDown" id="shortcut-speedDown">-</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">אפס מהירות</span>
                                    <button class="media-shortcut-key" data-action="speedReset" id="shortcut-speedReset">0</button>
                                </div>
                            </div>
                            
                            <!-- Group 4: Work Modes (ordered by tabs) -->
                            <div class="media-shortcut-group">
                                <div class="group-header">⚙️ מצבי עבודה</div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הפעל/כבה קיצורים</span>
                                    <button class="media-shortcut-key" data-action="toggleShortcuts" id="shortcut-toggleShortcuts">Ctrl+Shift+s</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הפעל/כבה דוושה</span>
                                    <button class="media-shortcut-key" data-action="togglePedal" id="shortcut-togglePedal">P</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">הפעל/כבה זיהוי אוטומטי</span>
                                    <button class="media-shortcut-key" data-action="toggleAutoDetect" id="shortcut-toggleAutoDetect">A</button>
                                </div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">החלף מצב רגיל/משופר</span>
                                    <button class="media-shortcut-key" data-action="toggleMode" id="shortcut-toggleMode">Ctrl+m</button>
                                </div>
                            </div>
                            
                            <!-- Group 5: Settings -->
                            <div class="media-shortcut-group">
                                <div class="group-header">🔧 הגדרות</div>
                                <div class="media-shortcut-item">
                                    <span class="media-shortcut-label">פתח הגדרות</span>
                                    <button class="media-shortcut-key" data-action="toggleSettings" id="shortcut-toggleSettings">S</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rewind on Pause Section -->
                        <div class="rewind-on-pause-section">
                            <h4>⏪ חזור אחורה בעצירה</h4>
                            <div class="rewind-on-pause-controls">
                                <div class="rewind-on-pause-toggle">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="rewindOnPauseEnabled" onchange="toggleRewindOnPause()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span>אפשר חזרה אחורה בעצירה</span>
                                </div>
                                <div class="rewind-amount-container disabled" id="rewindAmountContainer">
                                    <label>כמות (שניות):</label>
                                    <input type="number" 
                                           id="rewindAmount" 
                                           class="rewind-amount-input"
                                           min="0.1" 
                                           max="2.0" 
                                           step="0.1" 
                                           value="0.3"
                                           onchange="updateRewindAmount()">
                                </div>
                            </div>
                        </div>
                        
                        <div class="shortcuts-footer">
                            <button class="reset-shortcuts-btn" onclick="resetMediaShortcuts()">אפס לברירת מחדל</button>
                            <div class="media-shortcuts-status" id="mediaShortcutsStatus"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Pedal Tab -->
                <div class="settings-tab-content" id="pedal-tab">
                    <div class="pedal-settings-container">
                        <!-- Header matching shortcuts tab -->
                        <div class="media-pedal-header">
                            <h3>🦶 דוושת רגל</h3>
                            <p class="pedal-hint">הגדר את כפתורי הדוושה לשליטה בנגן</p>
                            <div class="media-pedal-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="pedal-enabled-toggle" checked onchange="togglePedal(true)">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">דוושה פעילה</span>
                            </div>
                        </div>
                        
                        <!-- Connection Status -->
                        <div class="pedal-connection-section">
                            <div class="pedal-connection-content">
                                <div class="pedal-status">
                                    <span id="pedal-status-icon">⚪</span>
                                    <span id="pedal-status-text">לא מחובר</span>
                                </div>
                                <button id="pedal-connect-btn" class="pedal-connect-button">
                                    התחבר לדוושה
                                </button>
                                <p class="pedal-help-text">
                                    לחץ על "התחבר לדוושה" ובחר את המכשיר מהרשימה
                                </p>
                            </div>
                        </div>
                        
                        <!-- Button Mappings -->
                        <div class="pedal-mappings-section" id="pedal-mappings" style="display: none;">
                            <h3>הגדרות כפתורים</h3>
                            
                            <!-- Visual Pedal Interface -->
                            <div class="pedal-visual-container">
                                <div class="pedal-visual">
                                    <!-- Left Button -->
                                    <div class="pedal-button-visual" data-button="left">
                                        <div class="pedal-button-circle">
                                            <span class="pedal-button-arrow">➡️</span>
                                        </div>
                                        <div class="pedal-button-label">ימין</div>
                                        <select id="pedal-left-action" class="pedal-action-select">
                                            <option value="skipBackward2.5" selected>דלג אחורה 2.5 שניות</option>
                                            <option value="skipForward2.5">דלג קדימה 2.5 שניות</option>
                                            <option value="skipForward5">דלג קדימה 5 שניות</option>
                                            <option value="skipBackward5">דלג אחורה 5 שניות</option>
                                            <option value="skipForward10">דלג קדימה 10 שניות</option>
                                            <option value="skipBackward10">דלג אחורה 10 שניות</option>
                                            <option value="playPause">הפעל/השהה</option>
                                            <option value="speedUp">הגבר מהירות</option>
                                            <option value="speedDown">הנמך מהירות</option>
                                            <option value="speedReset">אפס מהירות</option>
                                            <option value="volumeUp">הגבר ווליום</option>
                                            <option value="volumeDown">הנמך ווליום</option>
                                            <option value="mute">השתק/בטל השתקה</option>
                                            <option value="jumpToStart">קפוץ להתחלה</option>
                                            <option value="jumpToEnd">קפוץ לסוף</option>
                                            <option value="none">ללא פעולה</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Center Button -->
                                    <div class="pedal-button-visual" data-button="center">
                                        <div class="pedal-button-circle">
                                            <span class="pedal-button-arrow">⏸️</span>
                                        </div>
                                        <div class="pedal-button-label">מרכז</div>
                                        <select id="pedal-center-action" class="pedal-action-select">
                                            <option value="playPause" selected>הפעל/השהה</option>
                                            <option value="skipForward2.5">דלג קדימה 2.5 שניות</option>
                                            <option value="skipBackward2.5">דלג אחורה 2.5 שניות</option>
                                            <option value="skipForward5">דלג קדימה 5 שניות</option>
                                            <option value="skipBackward5">דלג אחורה 5 שניות</option>
                                            <option value="skipForward10">דלג קדימה 10 שניות</option>
                                            <option value="skipBackward10">דלג אחורה 10 שניות</option>
                                            <option value="speedUp">הגבר מהירות</option>
                                            <option value="speedDown">הנמך מהירות</option>
                                            <option value="speedReset">אפס מהירות</option>
                                            <option value="volumeUp">הגבר ווליום</option>
                                            <option value="volumeDown">הנמך ווליום</option>
                                            <option value="mute">השתק/בטל השתקה</option>
                                            <option value="jumpToStart">קפוץ להתחלה</option>
                                            <option value="jumpToEnd">קפוץ לסוף</option>
                                            <option value="none">ללא פעולה</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Right Button -->
                                    <div class="pedal-button-visual" data-button="right">
                                        <div class="pedal-button-circle">
                                            <span class="pedal-button-arrow">⬅️</span>
                                        </div>
                                        <div class="pedal-button-label">שמאל</div>
                                        <select id="pedal-right-action" class="pedal-action-select">
                                            <option value="skipForward2.5" selected>דלג קדימה 2.5 שניות</option>
                                            <option value="skipBackward2.5">דלג אחורה 2.5 שניות</option>
                                            <option value="skipForward5">דלג קדימה 5 שניות</option>
                                            <option value="skipBackward5">דלג אחורה 5 שניות</option>
                                            <option value="skipForward10">דלג קדימה 10 שניות</option>
                                            <option value="skipBackward10">דלג אחורה 10 שניות</option>
                                            <option value="playPause">הפעל/השהה</option>
                                            <option value="speedUp">הגבר מהירות</option>
                                            <option value="speedDown">הנמך מהירות</option>
                                            <option value="speedReset">אפס מהירות</option>
                                            <option value="volumeUp">הגבר ווליום</option>
                                            <option value="volumeDown">הנמך ווליום</option>
                                            <option value="mute">השתק/בטל השתקה</option>
                                            <option value="jumpToStart">קפוץ להתחלה</option>
                                            <option value="jumpToEnd">קפוץ לסוף</option>
                                            <option value="none">ללא פעולה</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Continuous Press Settings -->
                            <div class="pedal-continuous-section">
                                <h3>לחיצה ממושכת</h3>
                                <label class="pedal-checkbox-label">
                                    <input type="checkbox" id="pedal-continuous-enabled" checked>
                                    <span>אפשר דילוג רציף בלחיצה ממושכת</span>
                                </label>
                                <div class="pedal-continuous-config" id="pedal-continuous-config">
                                    <label>
                                        מרווח זמן בלחיצה ממושכת (שניות):
                                        <input type="number" id="pedal-continuous-interval" 
                                               min="0.1" max="5" step="0.1" value="0.5">
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Rewind on Pause Section -->
                            <div class="rewind-on-pause-section">
                                <h4>⏪ חזור אחורה בעצירה</h4>
                                <div class="rewind-on-pause-controls">
                                    <div class="rewind-on-pause-toggle">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="pedalRewindOnPauseEnabled" onchange="toggleRewindOnPause()">
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <span>אפשר חזרה אחורה בעצירה</span>
                                    </div>
                                    <div class="rewind-amount-container disabled" id="pedalRewindAmountContainer">
                                        <label>כמות (שניות):</label>
                                        <input type="number" 
                                               id="pedalRewindAmount" 
                                               class="rewind-amount-input"
                                               min="0.1" 
                                               max="2.0" 
                                               step="0.1" 
                                               value="0.3"
                                               onchange="updateRewindAmount()">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Test Area -->
                            <div class="pedal-test-section">
                                <h3>בדיקת דוושה</h3>
                                <p class="pedal-test-hint">לחץ על כפתורי הדוושה לבדיקה</p>
                                <div class="pedal-test-display" id="pedal-test-display">
                                    <span class="pedal-test-button" id="test-left">➡️</span>
                                    <span class="pedal-test-button" id="test-center">⏸️</span>
                                    <span class="pedal-test-button" id="test-right">⬅️</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Auto-detect Tab -->
                <div class="settings-tab-content" id="autodetect-tab">
                    <div class="auto-detect-container">
                        <!-- Header matching other tabs -->
                        <div class="media-auto-detect-header">
                            <h3>🔍 זיהוי אוטומטי</h3>
                            <p class="auto-detect-hint">עצור והפעל אוטומטית של המדיה בזמן הקלדה</p>
                            <div class="media-auto-detect-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoDetectEnabledToggle" onchange="toggleAutoDetect()">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">זיהוי אוטומטי פעיל</span>
                            </div>
                        </div>
                        
                        <!-- Mode Selection -->
                        <div class="auto-detect-mode-section">
                            <h3>מצב עבודה</h3>
                            <div class="auto-detect-mode-options">
                                <label class="mode-option">
                                    <input type="radio" name="autoDetectMode" value="regular" checked>
                                    <div class="mode-card">
                                        <span class="mode-icon">🎯</span>
                                        <span class="mode-title">רגיל</span>
                                        <span class="mode-description">עצור בהתחלת הקלדה, המשך אחרי הפסקה</span>
                                    </div>
                                </label>
                                <label class="mode-option">
                                    <input type="radio" name="autoDetectMode" value="enhanced">
                                    <div class="mode-card">
                                        <span class="mode-icon">⚡</span>
                                        <span class="mode-title">משופר</span>
                                        <span class="mode-description">המשך בזמן הקלדה, עצור בהפסקה ראשונה</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Settings -->
                        <div class="auto-detect-settings-section">
                            <h3>הגדרות זיהוי</h3>
                            <div class="auto-detect-settings">
                                <!-- Regular Mode Settings -->
                                <div class="regular-mode-settings" id="regularModeSettings">
                                    <div class="setting-item">
                                        <label>השהייה לפני חידוש הנגינה (שניות):</label>
                                        <input type="number" 
                                               id="autoDetectDelay" 
                                               class="auto-detect-input"
                                               min="0.5" 
                                               max="5" 
                                               step="0.1" 
                                               value="2.0">
                                    </div>
                                </div>
                                
                                <!-- Enhanced Mode Settings -->
                                <div class="enhanced-mode-settings" id="enhancedModeSettings" style="display: none;">
                                    <div class="setting-item">
                                        <label>השהייה עד הפסקה ראשונה (שניות):</label>
                                        <input type="number" 
                                               id="enhancedFirstPauseDelay" 
                                               class="auto-detect-input"
                                               min="0.5" 
                                               max="5" 
                                               step="0.1" 
                                               value="1.5">
                                    </div>
                                    <div class="setting-item">
                                        <label>השהייה עד הפסקה שנייה (שניות):</label>
                                        <input type="number" 
                                               id="enhancedSecondPauseDelay" 
                                               class="auto-detect-input"
                                               min="0.5" 
                                               max="5" 
                                               step="0.1" 
                                               value="1.5">
                                    </div>
                                    <div class="setting-item">
                                        <label>השהייה לחידוש אוטומטי (שניות):</label>
                                        <input type="number" 
                                               id="enhancedResumeDelay" 
                                               class="auto-detect-input"
                                               min="0.5" 
                                               max="5" 
                                               step="0.1" 
                                               value="2.0">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Status -->
                        <div class="auto-detect-status-section">
                            <h3>מצב נוכחי</h3>
                            <div class="auto-detect-status">
                                <div class="status-indicator" id="autoDetectStatusIndicator">
                                    <span class="status-icon">•</span>
                                    <span class="status-text" id="autoDetectStatusText">כבוי</span>
                                </div>
                                <div class="enhanced-mode-status" id="enhancedModeStatus" style="display: none; margin-top: 10px; color: rgba(224, 247, 247, 0.8); font-size: 13px;">
                                    <span id="enhancedModeStatusText"></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rewind on Pause Section -->
                        <div class="rewind-on-pause-section">
                            <h4>⏪ חזור אחורה בעצירה</h4>
                            <div class="rewind-on-pause-controls">
                                <div class="rewind-on-pause-toggle">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="autoDetectRewindEnabled" onchange="toggleAutoDetectRewind()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span>אפשר חזרה אחורה בעצירה</span>
                                </div>
                                <div class="rewind-amount-container disabled" id="autoDetectRewindContainer">
                                    <label>כמות (שניות):</label>
                                    <input type="number" 
                                           id="autoDetectRewindAmount" 
                                           class="rewind-amount-input"
                                           min="0.1" 
                                           max="2.0" 
                                           step="0.1" 
                                           value="0.3"
                                           onchange="updateAutoDetectRewindAmount()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="js/script.js"></script>
</body>
</html>